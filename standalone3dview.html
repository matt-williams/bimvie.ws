<!DOCTYPE html>
<html>
  <head>
	<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
	<meta content="utf-8" http-equiv="encoding">
	<base href="/"/>
	<title>Viewer</title>
  </head>
  <body style="margin: 0; padding: 0">
  	<div class="indexStatus statusWrapper">
		<div class="alert status">
			<div class="message"></div>
		</div>
  	</div>
	<span onclick="up();">Up</span>
	<span onclick="down();">Down</span>
	<span onclick="choose(0);">A</span>
	<span onclick="choose(1);">B</span>
	<div id="threedview" style="width: 400px; height: 400px"></div>
	<script src="bimviews/js/3dview.js"></script>
	<script src="bimviews/js/projects.js"></script>
	<script type="text/javascript">
var focus = 0;
var options = [0, -1, -1];

function up() {
	var oldFocus = focus;
	focus = (focus < 2) ? focus + 1 : 2;
	options[focus] = options[focus] == -1 ? 0 : options[focus];
	update();
	setCamera();
}

function down() {
	var oldFocus = focus;
	focus = (focus > 0) ? focus - 1 : 0;
	update();
	setCamera();
}

function choose(choice) {
	options[focus] = choice;
	update()
}

function update() {
	if (options[0] == 0) {
		threedView.showProject(PROJECTS.GROUND_FLOOR[0]);
		threedView.hideProject(PROJECTS.GROUND_FLOOR[1]);
	} else if (options[0] == 1) {
		threedView.hideProject(PROJECTS.GROUND_FLOOR[0]);
		threedView.showProject(PROJECTS.GROUND_FLOOR[1]);
	} else {
		threedView.hideProject(PROJECTS.GROUND_FLOOR[0]);
		threedView.hideProject(PROJECTS.GROUND_FLOOR[1]);
	}

	if (focus >= 1) {
		if (options[1] == 0) {
			threedView.showProject(PROJECTS.FIRST_FLOOR[0]);
		} else {
			threedView.hideProject(PROJECTS.FIRST_FLOOR[0]);
		}
	} else {
/*
		if (options[1] == 0) {
			threedView.showProjectGray(PROJECTS.FIRST_FLOOR[0]);
		} else {
*/
			threedView.hideProject(PROJECTS.FIRST_FLOOR[0]);
//		}
	}

	if (focus >= 2) {
		if (options[2] == 0) {
			threedView.showProject(PROJECTS.ROOF[0]);
			threedView.hideProject(PROJECTS.ROOF[1]);
		} else if (options[2] == 1) {
			threedView.hideProject(PROJECTS.ROOF[0]);
			threedView.showProject(PROJECTS.ROOF[1]);
		} else {
			threedView.hideProject(PROJECTS.ROOF[0]);
			threedView.hideProject(PROJECTS.ROOF[1]);
		}
	} else {
/*
		if (options[2] == 0) {
			threedView.showProjectGray(PROJECTS.ROOF[0]);
			threedView.hideProject(PROJECTS.ROOF[1]);
		} else if (options[2] == 1) {
			threedView.hideProject(PROJECTS.ROOF[0]);
			threedView.showProjectGray(PROJECTS.ROOF[1]);
		} else {
*/
			threedView.hideProject(PROJECTS.ROOF[0]);
			threedView.hideProject(PROJECTS.ROOF[1]);
//		}
	}
}

function setCamera() {
	threedView.setCamera({x: -2000, y: 0, z: 12000 + focus * 3000}, {x: 0.2, y: 0, z: -0.98}, 16000);
}

Global.onInitialized = function() {
	threedView = new ThreeDView($("#threedview"));
	threedView.load().done(function() {
		threedView.loadProject(PROJECTS.GROUND_FLOOR[0]);
		threedView.loadProject(PROJECTS.GROUND_FLOOR[1]);
		threedView.loadProject(PROJECTS.FIRST_FLOOR[0]);
		threedView.loadProject(PROJECTS.ROOF[0]);
		threedView.loadProject(PROJECTS.ROOF[1]);
		update();
		window.setTimeout(function() {
			setCamera();
		}, 1000);
	});
}
	</script>
  </body>
</html>
